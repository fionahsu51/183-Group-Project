[[extend 'layout.html']]

<style>
   [v-cloak] {
      display: none;
   }
</style>

<div class="section" id="vue-target" v-cloak>
   <h1 class="title is-family-monospace has-text-centered">Weekly Planner</h1>

   <!-- ADDING NEW TABLE CONTENT GOES HERE IN THIS DIV -->
   <div class="container has-text-left-fullhd">
      <h2 class="is-size-4"><strong>Add a new task</strong></h2>
      <p>Task Title</p>
      <input class="input has-fixed-size" placeholder="Add a task title" rows="2" v-model="new_task_title"></input>
      <p>Task Description</p>
      <textarea class="textarea has-fixed-size" placeholder="Add a task description" rows="2" v-model="new_task_description"></textarea>
      <p>Please choose a day to add the task to:</p>
      <span>
         [[for day in days:]]
         <button class="button" @click="new_task_day=[[=day]]">
            <span>[[=day]]</span>
         </button>
         [[pass]]
      </span>
      <div class="field mt-3">
         <div class="control">
            <button class="button is-link" @click="add_task">
               <span class="icon"><i class="fa fa-plus"></i></span>
               <span>Add task</span>
            </button>
         </div>
      </div>
   </div>

   <div class="container mt-6 has-text-left-fullhd">
      <div class="columns is-variable is-1">
         [[for day in days:]]
         <div class="column">
            <div class="has-text-centered">
               <strong>[[=day]]</strong>
               __________________
            </div>
            [[for r in rows:]]
            [[if r['day_selected'] == day:]]
            <div class="card mt-4">
               <header class="card-header">
                  <p class="card-header-title">
                     [[=r['title']]]
                  </p>
               </header>
               <div class="card-content">
                  <div class="content">
                     [[=r['description']]]
                  </div>
               </div>
               <footer class="card-footer">
                  <a class="card-footer-item" href="[[=URL('edit', r['id'], signer=url_signer)]]"><span class="icon"><i
                           class="fa fa-pencil"></i></span></a>
                  <a class="card-footer-item"><span class="icon"><i class="fa fa-trash"></i></span></a>
               </footer>
            </div>
            [[pass]]
            [[pass]]
         </div>
         [[pass]]
      </div>
   </div>
</div>


[[block page_scripts]]
<!-- Loads the index-specific js for Vue -->
<script>
   var get_tasks_url = "[[=XML(get_tasks_url)]]";
</script>
<script src="js/index.js"></script>
[[end]]